---
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  namespace: appstudio-workload-monitoring
  name: prometheus
  labels:
    prometheus: appstudio-kcp-workload
spec:
  endpoints:
  - bearerTokenSecret:
      key: ""
    interval: 15s
    port: oauth2-proxy
    scheme: HTTPS
    tlsConfig:
      caFile: /etc/prometheus/tls/tls.crt # volume mounted in the `prometheus` container of the prometheus pods
      serverName: "prometheus-oauth2.appstudio-workload-monitoring.svc"
  namespaceSelector:
    matchNames:
    - appstudio-workload-monitoring
  selector:
    matchLabels:
      app.kubernetes.io/instance: prometheus
---
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  namespace: appstudio-workload-monitoring
  name: spi-operator
  labels:
    prometheus: appstudio-kcp-workload
spec:
  endpoints:
    - bearerTokenSecret:
        name: prometheus-k8s-token-x6qjc
        key: token
      scheme: https
      tlsConfig:
        insecureSkipVerify: true
      port: https
  namespaceSelector: {}
  selector:
    matchLabels:
      control-plane: "controller-manager"
      app.kubernetes.io/part-of: "service-provider-integration-operator"